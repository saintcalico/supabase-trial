<!DOCTYPE html>
<html>
<head>
    <title>Supabase Test</title>
    <style>
        #data-container {
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <h1>Supabase Test</h1>
    <button id="fetch-button">Fetch Data</button>
    <div id="data-container"></div>

    <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
    <script>
        const SUPABASE_URL = 'https://kxoexwdhzcxmxzygwatq.supabase.co'; 
        const SUPABASE_ANON_KEY = 'eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6Imt4b2V4d2RoemN4bXh6eWd3YXRxIiwicm9sZSI6ImFub24iLCJpYXQiOjE3Mzk3MDk4MjAsImV4cCI6MjA1NTI4NTgyMH0.wXpVEFOOHHReYwJj6cDltmjy3Ff5MXG75lFhA_8xS78'; 

        const supabase = supabase.createClient(SUPABASE_URL, SUPABASE_ANON_KEY);

        document.getElementById('fetch-button').addEventListener('click', fetchData);

        async function fetchData() {
            try {
                const { data, error } = await supabase
                    .from('test_table') // Replace with your table name
                    .select('*');

                if (error) {
                    console.error('Error fetching data:', error);
                    alert('Error fetching data. Check console.');
                    return;
                }

                console.log('Data:', data);
                displayData(data);

            } catch (error) {
                console.error('An unexpected error occurred:', error);
                alert('An unexpected error occurred. Check console.');
            }
        }

        function displayData(data) {
            const container = document.getElementById('data-container');
            container.innerHTML = ''; // Clear previous data

            if (data && data.length > 0) {
                const list = document.createElement('ul');
                data.forEach(item => {
                    const listItem = document.createElement('li');
                    listItem.textContent = JSON.stringify(item); // Or format as needed
                    list.appendChild(listItem);
                });
                container.appendChild(list);
            } else {
                container.textContent = 'No data found.';
            }
        }

        // Example insert function.
        async function insertData(){
            const { error } = await supabase
                .from('test_table')
                .insert({ some_column: 'test_value' }); //replace 'test_table' and 'some_column'

            if (error) {
                console.error('Error inserting data:', error);
                alert('Error inserting data. Check console.');
            } else {
                alert("Data inserted successfully!");
                fetchData(); //refresh data after insert.
            }
        }

        //Example button creation and event listener.
        const insertButton = document.createElement('button');
        insertButton.textContent = "Insert Test Data";
        insertButton.addEventListener('click', insertData);
        document.body.appendChild(insertButton);

    </script>
</body>
</html>